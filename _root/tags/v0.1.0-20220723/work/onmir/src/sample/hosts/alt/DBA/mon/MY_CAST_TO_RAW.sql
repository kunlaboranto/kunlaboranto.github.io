-- SELECT UTL_RAW.CAST_TO_RAW('ASDF') FROM DUAL;
-- EXEC :RET :=  MY_CAST_TO_RAW('ASDF');
-- SELECT MY_CAST_TO_RAW('ASDF') FROM DUAL;

CREATE OR REPLACE FUNCTION MY_CAST_TO_RAW ( A_STR IN VARCHAR(32000) )
RETURN VARCHAR(32000)
AS
	V_CNT  INTEGER;
	V_POS  INTEGER;
	V_DUMP VARCHAR(32000);
	V_STR  VARCHAR(32000);
	V_RET  VARCHAR(32000);
BEGIN

	V_DUMP := DUMP(A_STR);
	V_POS := 0;
	V_POS := INSTR( V_DUMP, ',', V_POS + 1 );
	V_POS := INSTR( V_DUMP, ',', V_POS + 1 );
	V_STR := SUBSTR( V_DUMP, V_POS + 1 );

	V_RET := NULL;
	V_POS := 0;
	V_CNT := 0;

	--LOOP
	WHILE V_CNT < 16000 LOOP
		V_CNT := V_CNT + 1;
		V_POS := INSTR( V_STR, ',' );

		IF V_POS = 0 THEN
			V_RET := V_RET|| TO_HEX( V_STR );
			EXIT;
		ELSE
			V_RET := V_RET|| TO_HEX( SUBSTR(V_STR, 1, V_POS - 1) );
			V_STR := SUBSTR(V_STR, V_POS + 1);
		END IF;

		--SYSTEM_.PRINTLN('@@ '||V_POS||','||V_RET||','||CHR(10)||'>> '||V_STR);
	END LOOP;

	RETURN V_RET;
END;
/
